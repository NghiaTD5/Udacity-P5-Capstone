{"ast":null,"code":"import _asyncToGenerator from \"D:/NghiaTD5/new_clone/p5_udacity/final/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"D:\\\\NghiaTD5\\\\new_clone\\\\p5_udacity\\\\final\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport Axios from \"axios\";\nimport { apiEndpoint } from \"../config\";\n\nvar FileDownload = require('js-file-download');\n\nexport function getTodos(_x) {\n  return _getTodos.apply(this, arguments);\n}\n\nfunction _getTodos() {\n  _getTodos = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(idToken) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"Fetching todos\");\n            _context.next = 3;\n            return Axios.get(\"\".concat(apiEndpoint, \"/todos\"), {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \".concat(idToken)\n              }\n            });\n\n          case 3:\n            response = _context.sent;\n            console.log(\"Todos:\", response.data);\n            return _context.abrupt(\"return\", response.data.items);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getTodos.apply(this, arguments);\n}\n\nexport function createTodo(_x2, _x3) {\n  return _createTodo.apply(this, arguments);\n}\n\nfunction _createTodo() {\n  _createTodo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(idToken, newTodo) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return Axios.post(\"\".concat(apiEndpoint, \"/todos\"), JSON.stringify(newTodo), {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \".concat(idToken)\n              }\n            });\n\n          case 2:\n            response = _context2.sent;\n            return _context2.abrupt(\"return\", response.data.item);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _createTodo.apply(this, arguments);\n}\n\nexport function patchTodo(_x4, _x5, _x6) {\n  return _patchTodo.apply(this, arguments);\n}\n\nfunction _patchTodo() {\n  _patchTodo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idToken, todoId, updatedTodo) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return Axios.patch(\"\".concat(apiEndpoint, \"/todos/\").concat(todoId), JSON.stringify(updatedTodo), {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \".concat(idToken)\n              }\n            });\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _patchTodo.apply(this, arguments);\n}\n\nexport function patchTodoAttachment(_x7, _x8, _x9) {\n  return _patchTodoAttachment.apply(this, arguments);\n}\n\nfunction _patchTodoAttachment() {\n  _patchTodoAttachment = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(idToken, todoId, s3Key) {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return Axios.put(\"\".concat(apiEndpoint, \"/todos/\").concat(todoId, \"/attachment\"), {\n              s3Key: s3Key\n            }, {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \".concat(idToken)\n              }\n            });\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _patchTodoAttachment.apply(this, arguments);\n}\n\nexport function deleteTodo(_x10, _x11, _x12) {\n  return _deleteTodo.apply(this, arguments);\n}\n\nfunction _deleteTodo() {\n  _deleteTodo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(idToken, todoId, s3Key) {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return Axios.post(\"\".concat(apiEndpoint, \"/todos/delete-value\"), {\n              todoId: todoId,\n              s3Key: s3Key\n            }, {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \".concat(idToken)\n              }\n            });\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _deleteTodo.apply(this, arguments);\n}\n\nexport function removeAttachment(_x13, _x14, _x15) {\n  return _removeAttachment.apply(this, arguments);\n}\n\nfunction _removeAttachment() {\n  _removeAttachment = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(idToken, todoId, s3Key) {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return Axios.post(\"\".concat(apiEndpoint, \"/todos/delete-file\"), {\n              todoId: todoId,\n              s3Key: s3Key\n            }, {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \".concat(idToken)\n              }\n            });\n\n          case 2:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return _removeAttachment.apply(this, arguments);\n}\n\nexport function getUploadUrl(_x16, _x17) {\n  return _getUploadUrl.apply(this, arguments);\n}\n\nfunction _getUploadUrl() {\n  _getUploadUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(idToken, s3Key) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return Axios.post(\"\".concat(apiEndpoint, \"/todos/upload-file\"), {\n              s3Key: s3Key\n            }, {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \".concat(idToken)\n              }\n            });\n\n          case 2:\n            response = _context7.sent;\n            return _context7.abrupt(\"return\", response.data.uploadUrl);\n\n          case 4:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n  return _getUploadUrl.apply(this, arguments);\n}\n\nexport function getDownloadUrl(_x18, _x19) {\n  return _getDownloadUrl.apply(this, arguments);\n}\n\nfunction _getDownloadUrl() {\n  _getDownloadUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(idToken, s3Key) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.next = 2;\n            return Axios.post(\"\".concat(apiEndpoint, \"/todos/download-file\"), {\n              s3Key: s3Key\n            }, {\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \".concat(idToken)\n              }\n            });\n\n          case 2:\n            response = _context8.sent;\n            return _context8.abrupt(\"return\", response.data.downloadUrl);\n\n          case 4:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n  return _getDownloadUrl.apply(this, arguments);\n}\n\nexport function uploadFile(_x20, _x21) {\n  return _uploadFile.apply(this, arguments);\n}\n\nfunction _uploadFile() {\n  _uploadFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(uploadUrl, file) {\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return Axios.put(uploadUrl, file);\n\n          case 2:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n  return _uploadFile.apply(this, arguments);\n}\n\nexport function download(url, filename) {\n  Axios({\n    url: url,\n    method: 'GET',\n    responseType: 'blob'\n  }).then(function (response) {\n    FileDownload(response.data, filename);\n  });\n}","map":{"version":3,"names":["Axios","apiEndpoint","FileDownload","require","getTodos","idToken","console","log","get","headers","Authorization","response","data","items","createTodo","newTodo","post","JSON","stringify","item","patchTodo","todoId","updatedTodo","patch","patchTodoAttachment","s3Key","put","deleteTodo","removeAttachment","getUploadUrl","uploadUrl","getDownloadUrl","downloadUrl","uploadFile","file","download","url","filename","method","responseType","then"],"sources":["D:/NghiaTD5/new_clone/p5_udacity/final/client/src/api/todos-api.ts"],"sourcesContent":["import Axios from \"axios\";\r\n\r\nimport { apiEndpoint } from \"../config\";\r\nimport { Todo } from \"../types/Todo\";\r\nimport { CreateTodoRequest } from \"../types/CreateTodoRequest\";\r\nimport { UpdateTodoRequest } from \"../types/UpdateTodoRequest\";\r\n\r\nconst FileDownload = require('js-file-download')\r\n\r\nexport async function getTodos(idToken: string): Promise<Todo[]> {\r\n  console.log(\"Fetching todos\");\r\n\r\n  const response = await Axios.get(`${apiEndpoint}/todos`, {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${idToken}`,\r\n    },\r\n  });\r\n  console.log(\"Todos:\", response.data);\r\n  return response.data.items;\r\n}\r\n\r\nexport async function createTodo(\r\n  idToken: string,\r\n  newTodo: CreateTodoRequest\r\n): Promise<Todo> {\r\n  const response = await Axios.post(\r\n    `${apiEndpoint}/todos`,\r\n    JSON.stringify(newTodo),\r\n    {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${idToken}`,\r\n      },\r\n    }\r\n  );\r\n  return response.data.item;\r\n}\r\n\r\nexport async function patchTodo(\r\n  idToken: string,\r\n  todoId: string,\r\n  updatedTodo: UpdateTodoRequest\r\n): Promise<void> {\r\n  await Axios.patch(\r\n    `${apiEndpoint}/todos/${todoId}`,\r\n    JSON.stringify(updatedTodo),\r\n    {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${idToken}`,\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport async function patchTodoAttachment(\r\n  idToken: string,\r\n  todoId: string,\r\n  s3Key: string\r\n): Promise<void> {\r\n  await Axios.put(\r\n    `${apiEndpoint}/todos/${todoId}/attachment`,\r\n    {\r\n      s3Key\r\n    },\r\n    {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${idToken}`,\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport async function deleteTodo(\r\n  idToken: string,\r\n  todoId: string,\r\n  s3Key?: string\r\n): Promise<void> {\r\n  await Axios.post(`${apiEndpoint}/todos/delete-value`, {\r\n    todoId, s3Key\r\n  }, {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${idToken}`,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function removeAttachment(\r\n  idToken: string,\r\n  todoId: string,\r\n  s3Key: string\r\n) {\r\n  await Axios.post(`${apiEndpoint}/todos/delete-file`, {\r\n    todoId, s3Key\r\n  }, {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${idToken}`,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getUploadUrl(\r\n  idToken: string,\r\n  s3Key: string\r\n): Promise<string> {\r\n  const response = await Axios.post(\r\n    `${apiEndpoint}/todos/upload-file`, {\r\n      s3Key\r\n    },\r\n    {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${idToken}`,\r\n      },\r\n    }\r\n  );\r\n  return response.data.uploadUrl;\r\n}\r\n\r\nexport async function getDownloadUrl(\r\n  idToken: string,\r\n  s3Key: string\r\n): Promise<string> {\r\n  const response = await Axios.post(\r\n    `${apiEndpoint}/todos/download-file`, {\r\n      s3Key\r\n    },\r\n    {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${idToken}`,\r\n      },\r\n    }\r\n  );\r\n  return response.data.downloadUrl;\r\n}\r\n\r\nexport async function uploadFile(\r\n  uploadUrl: string,\r\n  file: Buffer\r\n): Promise<void> {\r\n  await Axios.put(uploadUrl, file);\r\n}\r\n\r\nexport function download(url: string, filename: string) {\r\n  Axios({\r\n    url,\r\n    method: 'GET',\r\n    responseType: 'blob',\r\n  }).then((response) => {\r\n      FileDownload(response.data, filename);\r\n  });\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}